class ToggleForms extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      name: '',
      email: '',
      password: '',
      addressLine1: '',
      addressLine2: '',
      addressCity: '',
      addressState: '',
      addressZipCode: '',
      creditCardNo: '',
      expiryDate: '',
      CVV: '',
      billingZipCode: ''
    };
    this.handleSubmit = this.handleSubmit.bind(this);
    this.handleInput = this.handleInput.bind(this);
  }

  handleSubmit(event) {
    event.preventDefault();
    let s = this.state;
    let info = {};

    switch (this.props.checkoutStatus) {
      case 'F1':
        {
          info = {
            name: s.name,
            password: s.password,
            email: s.email
          };
          break;
        }

      case 'F2':
        {
          info = {
            addressLine1: s.addressLine1,
            addressLine2: s.addressLine2,
            addressCity: s.addressCity,
            addressState: s.addressState,
            addressZipCode: s.addressZipCode
          };
          break;
        }

      case 'F3':
        {
          info = {
            creditCardNo: s.creditCardNo,
            expiryDate: s.expiryDate,
            CVV: s.CVV,
            billingZipCode: s.billingZipCode
          };
          break;
        }

      default:
        {
          this.props.nextStep(this.props.checkoutStatus);
        }
    }

    console.log(info);
    this.props.submit(info);
  }

  handleInput(event) {
    this.setState({
      [event.target.name]: event.target.value
    });
  }

  render() {
    let text = '';
    let s = this.state;
    let showOrHideAll = 'hideMe';
    let showOrHideDetails = 'hideMe';
    let [box1, box2, box3, box4, box5] = ['', '', '', '', ''];
    let [formBox4Class, formBox5Class] = ["hideMe formBox4", "hideMe formBox5"];

    switch (this.props.checkoutStatus) {
      case 'F1':
        {
          text = 'Please enter your login details:';
          [box1, box2, box3, box4, box5] = ['name', 'email', 'password', null, null];
          showOrHideAll = 'showMe';
          break;
        }

      case 'F2':
        {
          text = 'Please enter your shipping details:';
          [box1, box2, box3, box4, box5] = ['addressLine1', 'addressLine2', 'addressCity', 'addressState', 'addressZipCode'];
          [formBox4Class, formBox5Class] = ["showMe formBox4", "showMe formBox5"];
          showOrHideAll = 'showMe';
          break;
        }

      case 'F3':
        {
          text = 'Please enter your credit card details:';
          [box1, box2, box3, box4, box5] = ['creditCardNo', 'expiryDate', 'CVV', 'billingZipCode', null];
          [formBox4Class, formBox5Class] = ["showMe formBox4", "hideMe formBox5"];
          showOrHideAll = 'showMe';
          break;
        }

      case 'F4':
        {
          text = 'Please confirm your purchase details:';
          showOrHideAll = 'hideMe';
          showOrHideDetails = 'showMe';
          break;
        }

      case 'F0':
      default:
        {
          text = 'Welcome to self-checkout! Please finalize your purchase for today.';
          [box1, box2, box3, box4, box5] = ['', '', '', '', ''];
          break;
        }
    }

    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("form", {
      onSubmit: this.handleSubmit
    }, text, /*#__PURE__*/React.createElement("div", {
      className: showOrHideAll
    }, /*#__PURE__*/React.createElement("span", {
      className: "formBox1"
    }, box1, /*#__PURE__*/React.createElement("input", {
      name: box1,
      value: this.state[box1],
      onChange: this.handleInput
    })), /*#__PURE__*/React.createElement("span", {
      className: "formBox2"
    }, box2, /*#__PURE__*/React.createElement("input", {
      name: box2,
      value: this.state[box2],
      onChange: this.handleInput
    })), /*#__PURE__*/React.createElement("span", {
      className: "formBox3"
    }, box3, /*#__PURE__*/React.createElement("input", {
      name: box3,
      value: this.state[box3],
      onChange: this.handleInput
    }))), /*#__PURE__*/React.createElement("span", {
      className: formBox4Class
    }, box4, /*#__PURE__*/React.createElement("input", {
      name: box4,
      value: this.state[box4],
      onChange: this.handleInput
    })), /*#__PURE__*/React.createElement("span", {
      className: formBox5Class
    }, box5, /*#__PURE__*/React.createElement("input", {
      name: box5,
      value: this.state[box5],
      onChange: this.handleInput
    })), /*#__PURE__*/React.createElement("span", {
      className: showOrHideDetails
    }, /*#__PURE__*/React.createElement("ul", null, /*#__PURE__*/React.createElement("li", null, s.name), /*#__PURE__*/React.createElement("li", null, s.email), /*#__PURE__*/React.createElement("li", null, s.addressLine1, " ", s.addressLine2, ", ", s.addressCity, ", ", s.addressState, ", ", s.addressZipCode), /*#__PURE__*/React.createElement("li", null, s.creditCardNo, ", ", s.expiryDate, ", ", s.CVV, ", ", s.billingZipCode, " "))), /*#__PURE__*/React.createElement("button", {
      className: "next",
      name: this.props.checkoutStatus
    }, "Next Step")));
  }

}

class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      checkoutStatus: '',
      id: ''
    };
    this.nextButton = this.nextButton.bind(this);
    this.handleSubmission = this.handleSubmission.bind(this);
  }

  componentDidMount() {
    this.setState({
      checkoutStatus: 'F0'
    });
  }

  nextButton(status) {
    let newStatus = 'F' + (parseInt(status.slice(1)) + 1);

    if (newStatus === 'F5') {
      newStatus = 'F0';
    }

    console.log('newStatus', newStatus);
    this.setState({
      checkoutStatus: newStatus
    });
  }

  handleSubmission(submission) {
    console.log('sending submission', submission);

    switch (this.state.checkoutStatus) {
      case 'F1':
        {
          console.log('on case 1!');
          axios.post('/users', {
            submission
          }).then(response => {
            console.log('post received!', response.data._id);
            this.state.id = response.data._id;
            this.nextButton(this.state.checkoutStatus);
          }).catch(err => {
            alert('could not submit request!', err);
          });
          break;
        }

      case 'F2':
        {
          console.log('on case 2!', this.state.id);
          axios.put('/address', {
            id: this.state.id,
            submission: submission
          }).then(response => {
            console.log('put received!', response);
            this.nextButton(this.state.checkoutStatus);
          }).catch(err => {
            alert('could not submit request!', err);
          });
          break;
        }

      case 'F3':
        {
          axios.put('/creditcard', {
            id: this.state.id,
            submission: submission
          }).then(response => {
            console.log('put received!', response);
            this.nextButton(this.state.checkoutStatus);
          }).catch(err => {
            alert('could not submit request!', err);
          });
          break;
        }

      default:
        {
          console.log('nothing sent');
        }
    }
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(ToggleForms, {
      checkoutStatus: this.state.checkoutStatus,
      submit: this.handleSubmission,
      nextStep: this.nextButton
    }));
  }

}

ReactDOM.render( /*#__PURE__*/React.createElement(App, null), document.getElementById('app'));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NsaWVudC9hcHAuanN4Il0sIm5hbWVzIjpbIlRvZ2dsZUZvcm1zIiwiUmVhY3QiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwic3RhdGUiLCJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImFkZHJlc3NMaW5lMSIsImFkZHJlc3NMaW5lMiIsImFkZHJlc3NDaXR5IiwiYWRkcmVzc1N0YXRlIiwiYWRkcmVzc1ppcENvZGUiLCJjcmVkaXRDYXJkTm8iLCJleHBpcnlEYXRlIiwiQ1ZWIiwiYmlsbGluZ1ppcENvZGUiLCJoYW5kbGVTdWJtaXQiLCJiaW5kIiwiaGFuZGxlSW5wdXQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicyIsImluZm8iLCJjaGVja291dFN0YXR1cyIsIm5leHRTdGVwIiwiY29uc29sZSIsImxvZyIsInN1Ym1pdCIsInNldFN0YXRlIiwidGFyZ2V0IiwidmFsdWUiLCJyZW5kZXIiLCJ0ZXh0Iiwic2hvd09ySGlkZUFsbCIsInNob3dPckhpZGVEZXRhaWxzIiwiYm94MSIsImJveDIiLCJib3gzIiwiYm94NCIsImJveDUiLCJmb3JtQm94NENsYXNzIiwiZm9ybUJveDVDbGFzcyIsIkFwcCIsImlkIiwibmV4dEJ1dHRvbiIsImhhbmRsZVN1Ym1pc3Npb24iLCJjb21wb25lbnREaWRNb3VudCIsInN0YXR1cyIsIm5ld1N0YXR1cyIsInBhcnNlSW50Iiwic2xpY2UiLCJzdWJtaXNzaW9uIiwiYXhpb3MiLCJwb3N0IiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsIl9pZCIsImNhdGNoIiwiZXJyIiwiYWxlcnQiLCJwdXQiLCJSZWFjdERPTSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFdBQU4sU0FBMEJDLEtBQUssQ0FBQ0MsU0FBaEMsQ0FBMEM7QUFDeENDLEVBQUFBLFdBQVcsQ0FBQ0MsS0FBRCxFQUFRO0FBQ2pCLFVBQU1BLEtBQU47QUFDQSxTQUFLQyxLQUFMLEdB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TixDQUFVLGFBQVYsRUFBeUI7QUFDdkJsQixZQUFBQSxFQUFFLEVBQUUsS0FBS3hDLEtBQUwsQ0FBV3dDLEVBRFE7QUFFdkJRLFlBQUFBLFVBQVUsRUFBRUE7QUFGVyxXQUF6QixFQUlDRyxJQUpELENBSU9DLFFBQUQsSUFBYztBQUNsQjlCLFlBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGVBQVosRUFBNkI2QixRQUE3QjtBQUNBLGlCQUFLWCxVQUFMLENBQWdCLEtBQUt6QyxLQUFMLENBQVdvQixjQUEzQjtBQUNELFdBUEQsRUFRQ21DLEtBUkQsQ0FRUUMsR0FBRCxJQUFRO0FBQ2JDLFlBQUFBLEtBQUssQ0FBQywyQkFBRCxFQUE4QkQsR0FBOUIsQ0FBTDtBQUNELFdBVkQ7QUFXQTtBQUNEOztBQUNEO0FBQVM7QUFDUGxDLFVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGNBQVo7QUFDRDtBQS9DSDtBQWlERDs7QUFJREssRUFBQUEsTUFBTSxHQUFHO0FBQ1Asd0JBQ0UsOENBQ0Usb0JBQUMsV0FBRDtBQUFhLE1BQUEsY0FBYyxFQUFFLEtBQUs1QixLQUFMLENBQVdvQixjQUF4QztBQUF3RCxNQUFBLE1BQU0sRUFBRSxLQUFLc0IsZ0JBQXJFO0FBQXVGLE1BQUEsUUFBUSxFQUFFLEtBQUtEO0FBQXRHLE1BREYsQ0FERjtBQUtEOztBQTNGK0I7O0FBOEZsQ2tCLFFBQVEsQ0FBQy9CLE1BQVQsZUFBZ0Isb0JBQUMsR0FBRCxPQUFoQixFQUF5QmdDLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixLQUF4QixDQUF6QiIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFRvZ2dsZUZvcm1zIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9ICh7XHJcbiAgICAgIG5hbWU6ICcnLFxyXG4gICAgICBlbWFpbDogJycsXHJcbiAgICAgIHBhc3N3b3JkOiAnJyxcclxuICAgICAgYWRkcmVzc0xpbmUxOiAnJyxcclxuICAgICAgYWRkcmVzc0xpbmUyOiAnJyxcclxuICAgICAgYWRkcmVzc0NpdHk6ICcnLFxyXG4gICAgICBhZGRyZXNzU3RhdGU6ICcnLFxyXG4gICAgICBhZGRyZXNzWmlwQ29kZTogJycsXHJcbiAgICAgIGNyZWRpdENhcmRObzogJycsXHJcbiAgICAgIGV4cGlyeURhdGU6ICcnLFxyXG4gICAgICBDVlY6ICcnLFxyXG4gICAgICBiaWxsaW5nWmlwQ29kZTogJycsXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gdGhpcy5oYW5kbGVTdWJtaXQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuaGFuZGxlSW5wdXQgPSB0aGlzLmhhbmRsZUlucHV0LmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVTdWJtaXQoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBsZXQgcyA9IHRoaXMuc3RhdGU7XHJcbiAgICBsZXQgaW5mbyA9IHt9O1xyXG4gICAgc3dpdGNoICh0aGlzLnByb3BzLmNoZWNrb3V0U3RhdHVzKSB7XHJcbiAgICAgIGNhc2UgJ0YxJzoge1xyXG4gICAgICAgIGluZm8gPSB7IG5hbWU6IHMubmFtZSwgcGFzc3dvcmQ6IHMucGFzc3dvcmQsIGVtYWlsOiBzLmVtYWlsIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdGMic6IHtcclxuICAgICAgICBpbmZvID0geyBhZGRyZXNzTGluZTE6IHMuYWRkcmVzc0xpbmUxLCBhZGRyZXNzTGluZTI6IHMuYWRkcmVzc0xpbmUyLCBhZGRyZXNzQ2l0eTogcy5hZGRyZXNzQ2l0eSwgYWRkcmVzc1N0YXRlOiBzLmFkZHJlc3NTdGF0ZSwgYWRkcmVzc1ppcENvZGU6IHMuYWRkcmVzc1ppcENvZGUgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ0YzJzoge1xyXG4gICAgICAgIGluZm8gPSB7IGNyZWRpdENhcmRObzogcy5jcmVkaXRDYXJkTm8sIGV4cGlyeURhdGU6IHMuZXhwaXJ5RGF0ZSwgQ1ZWOiBzLkNWViwgYmlsbGluZ1ppcENvZGU6IHMuYmlsbGluZ1ppcENvZGUgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICB0aGlzLnByb3BzLm5leHRTdGVwKHRoaXMucHJvcHMuY2hlY2tvdXRTdGF0dXMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhpbmZvKTtcclxuICAgIHRoaXMucHJvcHMuc3VibWl0KGluZm8pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlSW5wdXQoZXZlbnQpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBbZXZlbnQudGFyZ2V0Lm5hbWVdOiBldmVudC50YXJnZXQudmFsdWVcclxuICAgIH0pXHJcblxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgbGV0IHRleHQgPSAnJztcclxuICAgIGxldCBzID0gdGhpcy5zdGF0ZTtcclxuICAgIGxldCBzaG93T3JIaWRlQWxsID0gJ2hpZGVNZSc7XHJcbiAgICBsZXQgc2hvd09ySGlkZURldGFpbHMgPSAnaGlkZU1lJztcclxuICAgIGxldCBbYm94MSwgYm94MiwgYm94MywgYm94NCwgYm94NV0gPSBbJycsICcnLCAnJywgJycsICcnXVxyXG4gICAgbGV0IFtmb3JtQm94NENsYXNzLCBmb3JtQm94NUNsYXNzXSA9IFtcImhpZGVNZSBmb3JtQm94NFwiLCBcImhpZGVNZSBmb3JtQm94NVwiXTtcclxuICAgIHN3aXRjaCAodGhpcy5wcm9wcy5jaGVja291dFN0YXR1cykge1xyXG4gICAgICBjYXNlICdGMSc6IHtcclxuICAgICAgICB0ZXh0ID0gJ1BsZWFzZSBlbnRlciB5b3VyIGxvZ2luIGRldGFpbHM6JztcclxuICAgICAgICBbYm94MSwgYm94MiwgYm94MywgYm94NCwgYm94NV0gPSBbJ25hbWUnLCAnZW1haWwnLCAncGFzc3dvcmQnLCBudWxsLCBudWxsXTtcclxuICAgICAgICBzaG93T3JIaWRlQWxsID0gJ3Nob3dNZSc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnRjInOiB7XHJcbiAgICAgICAgdGV4dCA9ICdQbGVhc2UgZW50ZXIgeW91ciBzaGlwcGluZyBkZXRhaWxzOic7XHJcbiAgICAgICAgW2JveDEsIGJveDIsIGJveDMsIGJveDQsIGJveDVdID0gWydhZGRyZXNzTGluZTEnLCAnYWRkcmVzc0xpbmUyJywgJ2FkZHJlc3NDaXR5JywgJ2FkZHJlc3NTdGF0ZScsICdhZGRyZXNzWmlwQ29kZSddO1xyXG4gICAgICAgIFtmb3JtQm94NENsYXNzLCBmb3JtQm94NUNsYXNzXSA9IFtcInNob3dNZSBmb3JtQm94NFwiLCBcInNob3dNZSBmb3JtQm94NVwiXTtcclxuICAgICAgICBzaG93T3JIaWRlQWxsID0gJ3Nob3dNZSc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnRjMnOiB7XHJcbiAgICAgICAgdGV4dCA9ICdQbGVhc2UgZW50ZXIgeW91ciBjcmVkaXQgY2FyZCBkZXRhaWxzOic7XHJcbiAgICAgICAgW2JveDEsIGJveDIsIGJveDMsIGJveDQsIGJveDVdID0gWydjcmVkaXRDYXJkTm8nLCAnZXhwaXJ5RGF0ZScsICdDVlYnLCAnYmlsbGluZ1ppcENvZGUnLCBudWxsXTtcclxuICAgICAgICBbZm9ybUJveDRDbGFzcywgZm9ybUJveDVDbGFzc10gPSBbXCJzaG93TWUgZm9ybUJveDRcIiwgXCJoaWRlTWUgZm9ybUJveDVcIl07XHJcbiAgICAgICAgc2hvd09ySGlkZUFsbCA9ICdzaG93TWUnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ0Y0Jzoge1xyXG4gICAgICAgIHRleHQgPSAnUGxlYXNlIGNvbmZpcm0geW91ciBwdXJjaGFzZSBkZXRhaWxzOic7XHJcbiAgICAgICAgc2hvd09ySGlkZUFsbCA9ICdoaWRlTWUnO1xyXG4gICAgICAgIHNob3dPckhpZGVEZXRhaWxzID0gJ3Nob3dNZSdcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdGMCc6XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICB0ZXh0ID0gJ1dlbGNvbWUgdG8gc2VsZi1jaGVja291dCEgUGxlYXNlIGZpbmFsaXplIHlvdXIgcHVyY2hhc2UgZm9yIHRvZGF5Lic7XHJcbiAgICAgICAgW2JveDEsIGJveDIsIGJveDMsIGJveDQsIGJveDVdID0gWycnLCAnJywgJycsICcnLCAnJ107XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdH0+e3RleHR9XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c2hvd09ySGlkZUFsbH0+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17XCJmb3JtQm94MVwifT57Ym94MX1cclxuICAgICAgICAgICAgICA8aW5wdXQgbmFtZT17Ym94MX0gdmFsdWU9e3RoaXMuc3RhdGVbYm94MV19IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUlucHV0fT48L2lucHV0PlxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvcm1Cb3gyXCI+e2JveDJ9XHJcbiAgICAgICAgICAgICAgPGlucHV0IG5hbWU9e2JveDJ9IHZhbHVlPXt0aGlzLnN0YXRlW2JveDJdfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVJbnB1dH0+PC9pbnB1dD5cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb3JtQm94M1wiPntib3gzfVxyXG4gICAgICAgICAgICAgIDxpbnB1dCBuYW1lPXtib3gzfSB2YWx1ZT17dGhpcy5zdGF0ZVtib3gzXX0gb25DaGFuZ2U9e3RoaXMuaGFuZGxlSW5wdXR9PjwvaW5wdXQ+XHJcbiAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtmb3JtQm94NENsYXNzfT57Ym94NH1cclxuICAgICAgICAgICAgPGlucHV0IG5hbWU9e2JveDR9IHZhbHVlPXt0aGlzLnN0YXRlW2JveDRdfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVJbnB1dH0+PC9pbnB1dD5cclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17Zm9ybUJveDVDbGFzc30+e2JveDV9XHJcbiAgICAgICAgICAgIDxpbnB1dCBuYW1lPXtib3g1fSB2YWx1ZT17dGhpcy5zdGF0ZVtib3g1XX0gb25DaGFuZ2U9e3RoaXMuaGFuZGxlSW5wdXR9PjwvaW5wdXQ+XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3Nob3dPckhpZGVEZXRhaWxzfT5cclxuICAgICAgICAgICAgPHVsPlxyXG4gICAgICAgICAgICAgIDxsaT57cy5uYW1lfTwvbGk+XHJcbiAgICAgICAgICAgICAgPGxpPntzLmVtYWlsfTwvbGk+XHJcbiAgICAgICAgICAgICAgPGxpPntzLmFkZHJlc3NMaW5lMX0ge3MuYWRkcmVzc0xpbmUyfSwge3MuYWRkcmVzc0NpdHl9LCB7cy5hZGRyZXNzU3RhdGV9LCB7cy5hZGRyZXNzWmlwQ29kZX08L2xpPlxyXG4gICAgICAgICAgICAgIDxsaT57cy5jcmVkaXRDYXJkTm99LCB7cy5leHBpcnlEYXRlfSwge3MuQ1ZWfSwge3MuYmlsbGluZ1ppcENvZGV9IDwvbGk+XHJcbiAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cIm5leHRcIiBuYW1lPXt0aGlzLnByb3BzLmNoZWNrb3V0U3RhdHVzfT5OZXh0IFN0ZXA8L2J1dHRvbj5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuY2xhc3MgQXBwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9ICh7XHJcbiAgICAgIGNoZWNrb3V0U3RhdHVzOiAnJyxcclxuICAgICAgaWQ6ICcnXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMubmV4dEJ1dHRvbiA9IHRoaXMubmV4dEJ1dHRvbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5oYW5kbGVTdWJtaXNzaW9uID0gdGhpcy5oYW5kbGVTdWJtaXNzaW9uLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBjaGVja291dFN0YXR1czogJ0YwJ1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIG5leHRCdXR0b24oc3RhdHVzKSB7XHJcbiAgICBsZXQgbmV3U3RhdHVzID0gJ0YnICsgKHBhcnNlSW50KHN0YXR1cy5zbGljZSgxKSkgKyAxKTtcclxuICAgIGlmIChuZXdTdGF0dXMgPT09ICdGNScpIHtcclxuICAgICAgbmV3U3RhdHVzID0gJ0YwJztcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKCduZXdTdGF0dXMnLCBuZXdTdGF0dXMpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGNoZWNrb3V0U3RhdHVzOiBuZXdTdGF0dXMsXHJcbiAgICB9KVxyXG5cclxuICB9XHJcblxyXG4gIGhhbmRsZVN1Ym1pc3Npb24oc3VibWlzc2lvbikge1xyXG4gICAgY29uc29sZS5sb2coJ3NlbmRpbmcgc3VibWlzc2lvbicsIHN1Ym1pc3Npb24pXHJcbiAgICBzd2l0Y2godGhpcy5zdGF0ZS5jaGVja291dFN0YXR1cykge1xyXG4gICAgICBjYXNlICdGMSc6IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnb24gY2FzZSAxIScpXHJcbiAgICAgICAgYXhpb3MucG9zdCgnL3VzZXJzJywge1xyXG4gICAgICAgICAgc3VibWlzc2lvblxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygncG9zdCByZWNlaXZlZCEnLCByZXNwb25zZS5kYXRhLl9pZCk7XHJcbiAgICAgICAgICB0aGlzLnN0YXRlLmlkID0gcmVzcG9uc2UuZGF0YS5faWRcclxuICAgICAgICAgIHRoaXMubmV4dEJ1dHRvbih0aGlzLnN0YXRlLmNoZWNrb3V0U3RhdHVzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKT0+IHtcclxuICAgICAgICAgIGFsZXJ0KCdjb3VsZCBub3Qgc3VibWl0IHJlcXVlc3QhJywgZXJyKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnRjInOiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ29uIGNhc2UgMiEnLCB0aGlzLnN0YXRlLmlkKVxyXG4gICAgICAgIGF4aW9zLnB1dCgnL2FkZHJlc3MnLCB7XHJcbiAgICAgICAgICBpZDogdGhpcy5zdGF0ZS5pZCxcclxuICAgICAgICAgIHN1Ym1pc3Npb246IHN1Ym1pc3Npb25cclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ3B1dCByZWNlaXZlZCEnLCByZXNwb25zZSlcclxuICAgICAgICAgIHRoaXMubmV4dEJ1dHRvbih0aGlzLnN0YXRlLmNoZWNrb3V0U3RhdHVzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKT0+IHtcclxuICAgICAgICAgIGFsZXJ0KCdjb3VsZCBub3Qgc3VibWl0IHJlcXVlc3QhJywgZXJyKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnRjMnOiB7XHJcbiAgICAgICAgYXhpb3MucHV0KCcvY3JlZGl0Y2FyZCcsIHtcclxuICAgICAgICAgIGlkOiB0aGlzLnN0YXRlLmlkLFxyXG4gICAgICAgICAgc3VibWlzc2lvbjogc3VibWlzc2lvblxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygncHV0IHJlY2VpdmVkIScsIHJlc3BvbnNlKVxyXG4gICAgICAgICAgdGhpcy5uZXh0QnV0dG9uKHRoaXMuc3RhdGUuY2hlY2tvdXRTdGF0dXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpPT4ge1xyXG4gICAgICAgICAgYWxlcnQoJ2NvdWxkIG5vdCBzdWJtaXQgcmVxdWVzdCEnLCBlcnIpXHJcbiAgICAgICAgfSlcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ25vdGhpbmcgc2VudCcpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdj5cclxuICAgICAgICA8VG9nZ2xlRm9ybXMgY2hlY2tvdXRTdGF0dXM9e3RoaXMuc3RhdGUuY2hlY2tvdXRTdGF0dXN9IHN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXNzaW9ufSBuZXh0U3RlcD17dGhpcy5uZXh0QnV0dG9ufSAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcblJlYWN0RE9NLnJlbmRlcig8QXBwIC8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJykpXHJcblxyXG5cclxuIl19