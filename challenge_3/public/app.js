class ToggleForms extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      name: '',
      email: '',
      password: '',
      addressLine1: '',
      addressLine2: '',
      addressCity: '',
      addressState: '',
      addressZipCode: '',
      creditCardNo: '',
      expiryDate: '',
      CVV: '',
      billingZipCode: ''
    };
    this.handleSubmit = this.handleSubmit.bind(this);
    this.handleInput = this.handleInput.bind(this);
  }

  handleSubmit(event) {
    event.preventDefault();
    let s = this.state;
    let info = {};

    switch (this.props.checkoutStatus) {
      case 'F1':
        {
          info = {
            name: s.name,
            password: s.password,
            email: s.email
          };
          break;
        }

      case 'F2':
        {
          info = {
            addressLine1: s.addressLine1,
            addressLine2: s.addressLine2,
            addressCity: s.addressCity,
            addressState: s.addressState,
            addressZipCode: s.addressZipCode
          };
          break;
        }

      case 'F3':
        {
          info = {
            creditCardNo: s.creditCardNo,
            expiryDate: s.expiryDate,
            CVV: s.CVV,
            billingZipCode: s.billingZipCode
          };
          break;
        }

      default:
        {
          this.props.nextStep(this.props.checkoutStatus);
        }
    }

    console.log(info);
    this.props.submit(info);
  }

  handleInput(event) {
    this.setState({
      [event.target.name]: event.target.value
    });
  }

  render() {
    let text = '';
    let s = this.state;
    let showOrHideAll = 'hideMe';
    let showOrHideDetails = 'hideMe';
    let [box1, box2, box3, box4, box5] = ['', '', '', '', ''];
    let [formBox4Class, formBox5Class] = ["hideMe formBox4", "hideMe formBox5"];

    switch (this.props.checkoutStatus) {
      case 'F1':
        {
          text = 'Please enter your login details:';
          [box1, box2, box3, box4, box5] = ['name', 'email', 'password', null, null];
          showOrHideAll = 'showMe';
          break;
        }

      case 'F2':
        {
          text = 'Please enter your shipping details:';
          [box1, box2, box3, box4, box5] = ['addressLine1', 'addressLine2', 'addressCity', 'addressState', 'addressZipCode'];
          [formBox4Class, formBox5Class] = ["showMe formBox4", "showMe formBox5"];
          showOrHideAll = 'showMe';
          break;
        }

      case 'F3':
        {
          text = 'Please enter your credit card details:';
          [box1, box2, box3, box4, box5] = ['creditCardNo', 'expiryDate', 'CVV', 'billingZipCode', null];
          [formBox4Class, formBox5Class] = ["showMe formBox4", "hideMe formBox5"];
          showOrHideAll = 'showMe';
          break;
        }

      case 'F4':
        {
          text = 'Please confirm your purchase details:';
          showOrHideAll = 'hideMe';
          showOrHideDetails = 'showMe';
          break;
        }

      case 'F0':
      default:
        {
          text = 'Welcome to self-checkout! Please finalize your purchase for today.';
          [box1, box2, box3, box4, box5] = ['', '', '', '', ''];
          break;
        }
    }

    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("form", {
      onSubmit: this.handleSubmit
    }, text, /*#__PURE__*/React.createElement("div", {
      className: showOrHideAll
    }, /*#__PURE__*/React.createElement("span", {
      className: "formBox1"
    }, box1, /*#__PURE__*/React.createElement("input", {
      name: box1,
      value: this.state[box1],
      onChange: this.handleInput
    })), /*#__PURE__*/React.createElement("span", {
      className: "formBox2"
    }, box2, /*#__PURE__*/React.createElement("input", {
      name: box2,
      value: this.state[box2],
      onChange: this.handleInput
    })), /*#__PURE__*/React.createElement("span", {
      className: "formBox3"
    }, box3, /*#__PURE__*/React.createElement("input", {
      name: box3,
      value: this.state[box3],
      onChange: this.handleInput
    }))), /*#__PURE__*/React.createElement("span", {
      className: formBox4Class
    }, box4, /*#__PURE__*/React.createElement("input", {
      name: box4,
      value: this.state[box4],
      onChange: this.handleInput
    })), /*#__PURE__*/React.createElement("span", {
      className: formBox5Class
    }, box5, /*#__PURE__*/React.createElement("input", {
      name: box5,
      value: this.state[box5],
      onChange: this.handleInput
    })), /*#__PURE__*/React.createElement("span", {
      className: showOrHideDetails
    }, /*#__PURE__*/React.createElement("ul", null, /*#__PURE__*/React.createElement("li", null, s.name), /*#__PURE__*/React.createElement("li", null, s.email), /*#__PURE__*/React.createElement("li", null, s.addressLine1, " ", s.addressLine2, ", ", s.addressCity, ", ", s.addressState, ", ", s.addressZipCode), /*#__PURE__*/React.createElement("li", null, s.creditCardNo, ", ", s.expiryDate, ", ", s.CVV, ", ", s.billingZipCode, " "))), /*#__PURE__*/React.createElement("button", {
      className: "next",
      name: this.props.checkoutStatus
    }, this.props.checkoutStatus === 'F4' ? 'Purchase' : 'Next Step')));
  }

}

class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      checkoutStatus: '',
      id: ''
    };
    this.nextButton = this.nextButton.bind(this);
    this.handleSubmission = this.handleSubmission.bind(this);
  }

  componentDidMount() {
    this.setState({
      checkoutStatus: 'F0'
    });
  }

  nextButton(status) {
    let newStatus = 'F' + (parseInt(status.slice(1)) + 1);

    if (newStatus === 'F5') {
      newStatus = 'F0';
    }

    console.log('newStatus', newStatus);
    this.setState({
      checkoutStatus: newStatus
    });
  }

  handleSubmission(submission) {
    console.log('sending submission', submission);

    switch (this.state.checkoutStatus) {
      case 'F1':
        {
          console.log('on case 1!');
          axios.post('/users', {
            submission
          }).then(response => {
            console.log('post received!', response.data._id);
            this.state.id = response.data._id;
            this.nextButton(this.state.checkoutStatus);
          }).catch(err => {
            alert('could not submit request!', err);
          });
          break;
        }

      case 'F2':
        {
          console.log('on case 2!', this.state.id);
          axios.put('/address', {
            id: this.state.id,
            submission: submission
          }).then(response => {
            console.log('put received!', response);
            this.nextButton(this.state.checkoutStatus);
          }).catch(err => {
            alert('could not submit request!', err);
          });
          break;
        }

      case 'F3':
        {
          axios.put('/creditcard', {
            id: this.state.id,
            submission: submission
          }).then(response => {
            console.log('put received!', response);
            this.nextButton(this.state.checkoutStatus);
          }).catch(err => {
            alert('could not submit request!', err);
          });
          break;
        }

      default:
        {
          console.log('nothing sent');
        }
    }
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement(ToggleForms, {
      checkoutStatus: this.state.checkoutStatus,
      submit: this.handleSubmission,
      nextStep: this.nextButton
    }));
  }

}

ReactDOM.render( /*#__PURE__*/React.createElement(App, null), document.getElementById('app'));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NsaWVudC9hcHAuanN4Il0sIm5hbWVzIjpbIlRvZ2dsZUZvcm1zIiwiUmVhY3QiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwic3RhdGUiLCJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImFkZHJlc3NMaW5lMSIsImFkZHJlc3NMaW5lMiIsImFkZHJlc3NDaXR5IiwiYWRkcmVzc1N0YXRlIiwiYWRkcmVzc1ppcENvZGUiLCJjcmVkaXRDYXJkTm8iLCJleHBpcnlEYXRlIiwiQ1ZWIiwiYmlsbGluZ1ppcENvZGUiLCJoYW5kbGVTdWJtaXQiLCJiaW5kIiwiaGFuZGxlSW5wdXQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicyIsImluZm8iLCJjaGVja291dFN0YXR1cyIsIm5leHRTdGVwIiwiY29uc29sZSIsImxvZyIsInN1Ym1pdCIsInNldFN0YXRlIiwidGFyZ2V0IiwidmFsdWUiLCJyZW5kZXIiLCJ0ZXh0Iiwic2hvd09ySGlkZUFsbCIsInNob3dPckhpZGVEZXRhaWxzIiwiYm94MSIsImJveDIiLCJib3gzIiwiYm94NCIsImJveDUiLCJmb3JtQm94NENsYXNzIiwiZm9ybUJveDVDbGFzcyIsIkFwcCIsImlkIiwibmV4dEJ1dHRvbiIsImhhbmRsZVN1Ym1pc3Npb24iLCJjb21wb25lbnREaWRNb3VudCIsInN0YXR1cyIsIm5ld1N0YXR1cyIsInBhcnNlSW50Iiwic2xpY2UiLCJzdWJtaXNzaW9uIiwiYXhpb3MiLCJwb3N0IiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsIl9pZCIsImNhdGNoIiwiZXJyIiwiYWxlcnQiLCJwdXQiLCJSZWFjdERPTSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFdBQU4sU0FBMEJDLEtBQUssQ0FBQ0MsU0FBaEMsQ0FBMEM7QUFDeENDLEVBQUFBLFdBQVcsQ0FBQ0MsS0FBRCxFQUFRO0FBQ2pCLFVBQU1BLEtBQU47QUFDQSxTQUFLQyxLQUFMLEdB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Q0QsV0FWRDtBQVdBO0FBQ0Q7O0FBQ0QsV0FBSyxJQUFMO0FBQVc7QUFDVFAsVUFBQUEsS0FBSyxDQUFDUyxHQUFOLENBQVUsYUFBVixFQUF5QjtBQUN2QmxCLFlBQUFBLEVBQUUsRUFBRSxLQUFLeEMsS0FBTCxDQUFXd0MsRUFEUTtBQUV2QlEsWUFBQUEsVUFBVSxFQUFFQTtBQUZXLFdBQXpCLEVBSUNHLElBSkQsQ0FJT0MsUUFBRCxJQUFjO0FBQ2xCOUIsWUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksZUFBWixFQUE2QjZCLFFBQTdCO0FBQ0EsaUJBQUtYLFVBQUwsQ0FBZ0IsS0FBS3pDLEtBQUwsQ0FBV29CLGNBQTNCO0FBQ0QsV0FQRCxFQVFDbUMsS0FSRCxDQVFRQyxHQUFELElBQVE7QUFDYkMsWUFBQUEsS0FBSyxDQUFDLDJCQUFELEVBQThCRCxHQUE5QixDQUFMO0FBQ0QsV0FWRDtBQVdBO0FBQ0Q7O0FBQ0Q7QUFBUztBQUNQbEMsVUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksY0FBWjtBQUNEO0FBL0NIO0FBaUREOztBQUlESyxFQUFBQSxNQUFNLEdBQUc7QUFDUCx3QkFDRSw4Q0FDRSxvQkFBQyxXQUFEO0FBQWEsTUFBQSxjQUFjLEVBQUUsS0FBSzVCLEtBQUwsQ0FBV29CLGNBQXhDO0FBQXdELE1BQUEsTUFBTSxFQUFFLEtBQUtzQixnQkFBckU7QUFBdUYsTUFBQSxRQUFRLEVBQUUsS0FBS0Q7QUFBdEcsTUFERixDQURGO0FBS0Q7O0FBM0YrQjs7QUE4RmxDa0IsUUFBUSxDQUFDL0IsTUFBVCxlQUFnQixvQkFBQyxHQUFELE9BQWhCLEVBQXlCZ0MsUUFBUSxDQUFDQyxjQUFULENBQXdCLEtBQXhCLENBQXpCIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgVG9nZ2xlRm9ybXMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0gKHtcclxuICAgICAgbmFtZTogJycsXHJcbiAgICAgIGVtYWlsOiAnJyxcclxuICAgICAgcGFzc3dvcmQ6ICcnLFxyXG4gICAgICBhZGRyZXNzTGluZTE6ICcnLFxyXG4gICAgICBhZGRyZXNzTGluZTI6ICcnLFxyXG4gICAgICBhZGRyZXNzQ2l0eTogJycsXHJcbiAgICAgIGFkZHJlc3NTdGF0ZTogJycsXHJcbiAgICAgIGFkZHJlc3NaaXBDb2RlOiAnJyxcclxuICAgICAgY3JlZGl0Q2FyZE5vOiAnJyxcclxuICAgICAgZXhwaXJ5RGF0ZTogJycsXHJcbiAgICAgIENWVjogJycsXHJcbiAgICAgIGJpbGxpbmdaaXBDb2RlOiAnJyxcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5oYW5kbGVTdWJtaXQgPSB0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5oYW5kbGVJbnB1dCA9IHRoaXMuaGFuZGxlSW5wdXQuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVN1Ym1pdChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGxldCBzID0gdGhpcy5zdGF0ZTtcclxuICAgIGxldCBpbmZvID0ge307XHJcbiAgICBzd2l0Y2ggKHRoaXMucHJvcHMuY2hlY2tvdXRTdGF0dXMpIHtcclxuICAgICAgY2FzZSAnRjEnOiB7XHJcbiAgICAgICAgaW5mbyA9IHsgbmFtZTogcy5uYW1lLCBwYXNzd29yZDogcy5wYXNzd29yZCwgZW1haWw6IHMuZW1haWwgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ0YyJzoge1xyXG4gICAgICAgIGluZm8gPSB7IGFkZHJlc3NMaW5lMTogcy5hZGRyZXNzTGluZTEsIGFkZHJlc3NMaW5lMjogcy5hZGRyZXNzTGluZTIsIGFkZHJlc3NDaXR5OiBzLmFkZHJlc3NDaXR5LCBhZGRyZXNzU3RhdGU6IHMuYWRkcmVzc1N0YXRlLCBhZGRyZXNzWmlwQ29kZTogcy5hZGRyZXNzWmlwQ29kZSB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnRjMnOiB7XHJcbiAgICAgICAgaW5mbyA9IHsgY3JlZGl0Q2FyZE5vOiBzLmNyZWRpdENhcmRObywgZXhwaXJ5RGF0ZTogcy5leHBpcnlEYXRlLCBDVlY6IHMuQ1ZWLCBiaWxsaW5nWmlwQ29kZTogcy5iaWxsaW5nWmlwQ29kZSB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgIHRoaXMucHJvcHMubmV4dFN0ZXAodGhpcy5wcm9wcy5jaGVja291dFN0YXR1cyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKGluZm8pO1xyXG4gICAgdGhpcy5wcm9wcy5zdWJtaXQoaW5mbyk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVJbnB1dChldmVudCkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIFtldmVudC50YXJnZXQubmFtZV06IGV2ZW50LnRhcmdldC52YWx1ZVxyXG4gICAgfSlcclxuXHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBsZXQgdGV4dCA9ICcnO1xyXG4gICAgbGV0IHMgPSB0aGlzLnN0YXRlO1xyXG4gICAgbGV0IHNob3dPckhpZGVBbGwgPSAnaGlkZU1lJztcclxuICAgIGxldCBzaG93T3JIaWRlRGV0YWlscyA9ICdoaWRlTWUnO1xyXG4gICAgbGV0IFtib3gxLCBib3gyLCBib3gzLCBib3g0LCBib3g1XSA9IFsnJywgJycsICcnLCAnJywgJyddXHJcbiAgICBsZXQgW2Zvcm1Cb3g0Q2xhc3MsIGZvcm1Cb3g1Q2xhc3NdID0gW1wiaGlkZU1lIGZvcm1Cb3g0XCIsIFwiaGlkZU1lIGZvcm1Cb3g1XCJdO1xyXG4gICAgc3dpdGNoICh0aGlzLnByb3BzLmNoZWNrb3V0U3RhdHVzKSB7XHJcbiAgICAgIGNhc2UgJ0YxJzoge1xyXG4gICAgICAgIHRleHQgPSAnUGxlYXNlIGVudGVyIHlvdXIgbG9naW4gZGV0YWlsczonO1xyXG4gICAgICAgIFtib3gxLCBib3gyLCBib3gzLCBib3g0LCBib3g1XSA9IFsnbmFtZScsICdlbWFpbCcsICdwYXNzd29yZCcsIG51bGwsIG51bGxdO1xyXG4gICAgICAgIHNob3dPckhpZGVBbGwgPSAnc2hvd01lJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdGMic6IHtcclxuICAgICAgICB0ZXh0ID0gJ1BsZWFzZSBlbnRlciB5b3VyIHNoaXBwaW5nIGRldGFpbHM6JztcclxuICAgICAgICBbYm94MSwgYm94MiwgYm94MywgYm94NCwgYm94NV0gPSBbJ2FkZHJlc3NMaW5lMScsICdhZGRyZXNzTGluZTInLCAnYWRkcmVzc0NpdHknLCAnYWRkcmVzc1N0YXRlJywgJ2FkZHJlc3NaaXBDb2RlJ107XHJcbiAgICAgICAgW2Zvcm1Cb3g0Q2xhc3MsIGZvcm1Cb3g1Q2xhc3NdID0gW1wic2hvd01lIGZvcm1Cb3g0XCIsIFwic2hvd01lIGZvcm1Cb3g1XCJdO1xyXG4gICAgICAgIHNob3dPckhpZGVBbGwgPSAnc2hvd01lJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdGMyc6IHtcclxuICAgICAgICB0ZXh0ID0gJ1BsZWFzZSBlbnRlciB5b3VyIGNyZWRpdCBjYXJkIGRldGFpbHM6JztcclxuICAgICAgICBbYm94MSwgYm94MiwgYm94MywgYm94NCwgYm94NV0gPSBbJ2NyZWRpdENhcmRObycsICdleHBpcnlEYXRlJywgJ0NWVicsICdiaWxsaW5nWmlwQ29kZScsIG51bGxdO1xyXG4gICAgICAgIFtmb3JtQm94NENsYXNzLCBmb3JtQm94NUNsYXNzXSA9IFtcInNob3dNZSBmb3JtQm94NFwiLCBcImhpZGVNZSBmb3JtQm94NVwiXTtcclxuICAgICAgICBzaG93T3JIaWRlQWxsID0gJ3Nob3dNZSc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnRjQnOiB7XHJcbiAgICAgICAgdGV4dCA9ICdQbGVhc2UgY29uZmlybSB5b3VyIHB1cmNoYXNlIGRldGFpbHM6JztcclxuICAgICAgICBzaG93T3JIaWRlQWxsID0gJ2hpZGVNZSc7XHJcbiAgICAgICAgc2hvd09ySGlkZURldGFpbHMgPSAnc2hvd01lJ1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ0YwJzpcclxuICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgIHRleHQgPSAnV2VsY29tZSB0byBzZWxmLWNoZWNrb3V0ISBQbGVhc2UgZmluYWxpemUgeW91ciBwdXJjaGFzZSBmb3IgdG9kYXkuJztcclxuICAgICAgICBbYm94MSwgYm94MiwgYm94MywgYm94NCwgYm94NV0gPSBbJycsICcnLCAnJywgJycsICcnXTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fT57dGV4dH1cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzaG93T3JIaWRlQWxsfT5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtcImZvcm1Cb3gxXCJ9Pntib3gxfVxyXG4gICAgICAgICAgICAgIDxpbnB1dCBuYW1lPXtib3gxfSB2YWx1ZT17dGhpcy5zdGF0ZVtib3gxXX0gb25DaGFuZ2U9e3RoaXMuaGFuZGxlSW5wdXR9PjwvaW5wdXQ+XHJcbiAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9ybUJveDJcIj57Ym94Mn1cclxuICAgICAgICAgICAgICA8aW5wdXQgbmFtZT17Ym94Mn0gdmFsdWU9e3RoaXMuc3RhdGVbYm94Ml19IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUlucHV0fT48L2lucHV0PlxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvcm1Cb3gzXCI+e2JveDN9XHJcbiAgICAgICAgICAgICAgPGlucHV0IG5hbWU9e2JveDN9IHZhbHVlPXt0aGlzLnN0YXRlW2JveDNdfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVJbnB1dH0+PC9pbnB1dD5cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2Zvcm1Cb3g0Q2xhc3N9Pntib3g0fVxyXG4gICAgICAgICAgICA8aW5wdXQgbmFtZT17Ym94NH0gdmFsdWU9e3RoaXMuc3RhdGVbYm94NF19IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUlucHV0fT48L2lucHV0PlxyXG4gICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtmb3JtQm94NUNsYXNzfT57Ym94NX1cclxuICAgICAgICAgICAgPGlucHV0IG5hbWU9e2JveDV9IHZhbHVlPXt0aGlzLnN0YXRlW2JveDVdfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVJbnB1dH0+PC9pbnB1dD5cclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17c2hvd09ySGlkZURldGFpbHN9PlxyXG4gICAgICAgICAgICA8dWw+XHJcbiAgICAgICAgICAgICAgPGxpPntzLm5hbWV9PC9saT5cclxuICAgICAgICAgICAgICA8bGk+e3MuZW1haWx9PC9saT5cclxuICAgICAgICAgICAgICA8bGk+e3MuYWRkcmVzc0xpbmUxfSB7cy5hZGRyZXNzTGluZTJ9LCB7cy5hZGRyZXNzQ2l0eX0sIHtzLmFkZHJlc3NTdGF0ZX0sIHtzLmFkZHJlc3NaaXBDb2RlfTwvbGk+XHJcbiAgICAgICAgICAgICAgPGxpPntzLmNyZWRpdENhcmROb30sIHtzLmV4cGlyeURhdGV9LCB7cy5DVlZ9LCB7cy5iaWxsaW5nWmlwQ29kZX0gPC9saT5cclxuICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwibmV4dFwiIG5hbWU9e3RoaXMucHJvcHMuY2hlY2tvdXRTdGF0dXN9Pnt0aGlzLnByb3BzLmNoZWNrb3V0U3RhdHVzID09PSAnRjQnID8gJ1B1cmNoYXNlJyA6ICdOZXh0IFN0ZXAnfTwvYnV0dG9uPlxyXG4gICAgICAgIDwvZm9ybT5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBBcHAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0gKHtcclxuICAgICAgY2hlY2tvdXRTdGF0dXM6ICcnLFxyXG4gICAgICBpZDogJydcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5uZXh0QnV0dG9uID0gdGhpcy5uZXh0QnV0dG9uLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmhhbmRsZVN1Ym1pc3Npb24gPSB0aGlzLmhhbmRsZVN1Ym1pc3Npb24uYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGNoZWNrb3V0U3RhdHVzOiAnRjAnXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgbmV4dEJ1dHRvbihzdGF0dXMpIHtcclxuICAgIGxldCBuZXdTdGF0dXMgPSAnRicgKyAocGFyc2VJbnQoc3RhdHVzLnNsaWNlKDEpKSArIDEpO1xyXG4gICAgaWYgKG5ld1N0YXR1cyA9PT0gJ0Y1Jykge1xyXG4gICAgICBuZXdTdGF0dXMgPSAnRjAnO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coJ25ld1N0YXR1cycsIG5ld1N0YXR1cyk7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgY2hlY2tvdXRTdGF0dXM6IG5ld1N0YXR1cyxcclxuICAgIH0pXHJcblxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU3VibWlzc2lvbihzdWJtaXNzaW9uKSB7XHJcbiAgICBjb25zb2xlLmxvZygnc2VuZGluZyBzdWJtaXNzaW9uJywgc3VibWlzc2lvbilcclxuICAgIHN3aXRjaCh0aGlzLnN0YXRlLmNoZWNrb3V0U3RhdHVzKSB7XHJcbiAgICAgIGNhc2UgJ0YxJzoge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdvbiBjYXNlIDEhJylcclxuICAgICAgICBheGlvcy5wb3N0KCcvdXNlcnMnLCB7XHJcbiAgICAgICAgICBzdWJtaXNzaW9uXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdwb3N0IHJlY2VpdmVkIScsIHJlc3BvbnNlLmRhdGEuX2lkKTtcclxuICAgICAgICAgIHRoaXMuc3RhdGUuaWQgPSByZXNwb25zZS5kYXRhLl9pZFxyXG4gICAgICAgICAgdGhpcy5uZXh0QnV0dG9uKHRoaXMuc3RhdGUuY2hlY2tvdXRTdGF0dXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpPT4ge1xyXG4gICAgICAgICAgYWxlcnQoJ2NvdWxkIG5vdCBzdWJtaXQgcmVxdWVzdCEnLCBlcnIpXHJcbiAgICAgICAgfSlcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdGMic6IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnb24gY2FzZSAyIScsIHRoaXMuc3RhdGUuaWQpXHJcbiAgICAgICAgYXhpb3MucHV0KCcvYWRkcmVzcycsIHtcclxuICAgICAgICAgIGlkOiB0aGlzLnN0YXRlLmlkLFxyXG4gICAgICAgICAgc3VibWlzc2lvbjogc3VibWlzc2lvblxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygncHV0IHJlY2VpdmVkIScsIHJlc3BvbnNlKVxyXG4gICAgICAgICAgdGhpcy5uZXh0QnV0dG9uKHRoaXMuc3RhdGUuY2hlY2tvdXRTdGF0dXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpPT4ge1xyXG4gICAgICAgICAgYWxlcnQoJ2NvdWxkIG5vdCBzdWJtaXQgcmVxdWVzdCEnLCBlcnIpXHJcbiAgICAgICAgfSlcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdGMyc6IHtcclxuICAgICAgICBheGlvcy5wdXQoJy9jcmVkaXRjYXJkJywge1xyXG4gICAgICAgICAgaWQ6IHRoaXMuc3RhdGUuaWQsXHJcbiAgICAgICAgICBzdWJtaXNzaW9uOiBzdWJtaXNzaW9uXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdwdXQgcmVjZWl2ZWQhJywgcmVzcG9uc2UpXHJcbiAgICAgICAgICB0aGlzLm5leHRCdXR0b24odGhpcy5zdGF0ZS5jaGVja291dFN0YXR1cyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycik9PiB7XHJcbiAgICAgICAgICBhbGVydCgnY291bGQgbm90IHN1Ym1pdCByZXF1ZXN0IScsIGVycilcclxuICAgICAgICB9KVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnbm90aGluZyBzZW50JylcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIDxUb2dnbGVGb3JtcyBjaGVja291dFN0YXR1cz17dGhpcy5zdGF0ZS5jaGVja291dFN0YXR1c30gc3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pc3Npb259IG5leHRTdGVwPXt0aGlzLm5leHRCdXR0b259IC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuUmVhY3RET00ucmVuZGVyKDxBcHAgLz4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKSlcclxuXHJcblxyXG4iXX0=